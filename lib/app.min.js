(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){"use strict";var prime;var Promise=window.Promise;var PrimaryStorage=function(options){this.db={};this.dbInfo={};this.openDB({name:options&&options.name||"clientDB",version:options&&options.version||1,storeName:options&&options.storeName||"testData"})};var PrimaryStorageProto=PrimaryStorage.prototype;PrimaryStorageProto.openDB=function(options){var _this=this;var option;if(options&&typeof options==="object"){for(option in options){if(options.hasOwnProperty(option)){this.dbInfo[option]=options[option]}}}return new Promise(function(resolve,reject){var request=indexedDB.open(_this.dbInfo.name,_this.dbInfo.version);request.onerror=function(event){reject(event.target.errorCode)};request.onupgradeneeded=function(event){event.currentTarget.result.createObjectStore(_this.dbInfo.storeName)};request.onsuccess=function(){_this.db=this.result;resolve()}})};PrimaryStorageProto.getItem=function(key){return new Promise(function(resolve,reject){var store=this.db.transaction(this.dbInfo.storeName,"readonly").objectStore(this.dbInfo.storeName);var request=store.get(key);request.onsuccess=function(event){var value=event.target.result;if(value===undefined){value=null}resolve(value)};request.onerror=function(){reject(request.error)}}.bind(this))};PrimaryStorageProto.setItem=function(key,value){return new Promise(function(resolve,reject){var store=this.db.transaction(this.dbInfo.storeName,"readwrite").objectStore(this.dbInfo.storeName);var request;if(value===undefined){return reject("Value must be not be undefined or left off")}request=store.put(value,key);request.onsuccess=function(){resolve(value)};request.onerror=function(){reject(request.error)}}.bind(this))};PrimaryStorageProto.removeItem=function(key){return new Promise(function(resolve,reject){var store=this.db.transaction(this.dbInfo.storeName,"readwrite").objectStore(this.dbInfo.storeName);var request=store["delete"](key);request.onsuccess=function(){resolve()};request.onerror=function(){reject(request.error)};request.onabort=function(event){var error=event.target.error;if(error==="QuotaExceededError"){reject(error)}}}.bind(this))};PrimaryStorageProto.key=function(idx){return new Promise(function(resolve,reject){var store=this.db.transaction(this.dbInfo.storeName,"readonly").objectStore(this.dbInfo.storeName);var advancing=false;var request=store.openCursor();if(idx===undefined){return reject("Index must be present and a number")}request.onsuccess=function(event){var cursor=event.target.result;if(idx===0){return resolve(cursor.key)}if(!advancing){advancing=true;cursor.advance(idx)}else{resolve(cursor.key)}};request.onerror=function(){reject(request.error)}}.bind(this))};PrimaryStorageProto.keys=function(){return new Promise(function(resolve,reject){var store=this.db.transaction(this.dbInfo.storeName,"readonly").objectStore(this.dbInfo.storeName);var request=store.openCursor();var arr=[];request.onsuccess=function(event){var cursor=event.target.result;if(!cursor){resolve(arr);return}arr.push(cursor.key);cursor.continue()};request.onerror=function(){reject(request.error)}}.bind(this))};PrimaryStorageProto.clear=function(){return new Promise(function(resolve,reject){var store=this.db.transaction(this.dbInfo.storeName,"readwrite").objectStore(this.dbInfo.storeName);var request=store.clear();request.onsuccess=function(){resolve()};request.onerror=function(){reject(request.error)}}.bind(this))};PrimaryStorageProto.length=function(){return new Promise(function(resolve,reject){var store=this.db.transaction(this.dbInfo.storeName,"readonly").objectStore(this.dbInfo.storeName);var request=store.count();request.onsuccess=function(){resolve(request.result)};request.onerror=function(){reject(request.error)}}.bind(this))};PrimaryStorageProto.deleteDB=function(){return new Promise(function(resolve,reject){var request;this.db.close();request=indexedDB.deleteDatabase(this.dbInfo.name);request.onsuccess=function(){resolve("Deleted database successfully")};request.onerror=function(){reject("Couldn't delete database")};request.onblocked=function(){reject("Couldn't delete database due to the operation being blocked")}}.bind(this))};prime=new PrimaryStorage;module.exports=prime},{}],2:[function(require,module,exports){"use strict";var Promise=window.Promise;var internals={};var FallbackStorage=function(){};var FallbackStorageProto=FallbackStorage.prototype;FallbackStorageProto.setItem=function(key,value){if(typeof value==="object"){value=JSON.stringify(value)}return new Promise(function(resolve,reject){if(value===undefined){return reject("Value must be a valid object, number or string")}localStorage.setItem(key,value);resolve(value)})};FallbackStorageProto.getItem=function(key){return new Promise(function(resolve,reject){var value=localStorage.getItem(key);if(value===null){return reject("Key is invalid or doesn't exist")}resolve(JSON.parse(value))})};FallbackStorageProto.removeItem=function(key){return new Promise(function(resolve,reject){if(key===undefined){return reject("Please specify a key to remove")}localStorage.removeItem(key);resolve("Key was successfully removed")})};FallbackStorageProto.length=function(){return new Promise(function(resolve){var count=localStorage.length;resolve(count)})};FallbackStorageProto.clear=function(){return new Promise(function(resolve){localStorage.clear();resolve("Local storage cleared")})};FallbackStorageProto.key=function(idx){var key=0;return new Promise(function(resolve,reject){if(idx===undefined||typeof idx!=="number"){return reject("Index must be a number and present")}key=localStorage.key(idx);resolve(key)})};FallbackStorageProto.keys=function(){var i=0;var len=localStorage.length;var arr=[];return new Promise(function(resolve){for(i;i<len;i++){arr.push(localStorage.key(i))}resolve(arr)})};internals.checkStorage=function(){var storage="storageWar";try{localStorage.setItem(storage,storage);localStorage.removeItem(storage);return Object.create(FallbackStorage.prototype)}catch(e){return false}};module.exports=internals.checkStorage},{}],3:[function(require,module,exports){"use strict";var satchel={};var internals={};internals.drivers={primary:require("./drivers/indexeddb"),secondary:require("./drivers/localstorage")()};internals.checkPrimarySupport=function(){var primarySupported="indexedDB"in window&&indexedDB.open("_satchel",1).onupgradeneeded===null;if(primarySupported){satchel=internals.drivers.primary;return true}satchel=internals.drivers.secondary;return false};internals.checkPrimarySupport();satchel.setStorage=function(storage){var drivers={localStorage:function(){return satchel=internals.drivers.secondary},indexedDB:function(){if(internals.checkPrimarySupport()){return satchel=internals.drivers.primary}return{}}};if(typeof drivers[storage]==="function"){return drivers[storage].call()}};module.exports=satchel;window.satchel=satchel},{"./drivers/indexeddb":1,"./drivers/localstorage":2}],4:[function(require,module,exports){"use strict";var satchel=require("./index")},{"./index":3}]},{},[4]);